<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hdc.rjxy.mapper.SolvedProblemMapper">

    <insert id="insertIgnore">
        INSERT IGNORE INTO solved_problem(
        user_id, platform_id, handle,
        contest_id, problem_index, problem_key,
        problem_name, problem_url,
        first_ac_time
        )
        VALUES (
        #{userId}, #{platformId}, #{handle},
        #{contestId}, #{problemIndex}, #{problemKey},
        #{problemName}, #{problemUrl},
        #{firstAcTime}
        )
    </insert>

    <select id="countSolvedInRange" resultType="int">
        SELECT COALESCE(COUNT(*), 0)
        FROM solved_problem
        WHERE user_id = #{userId}
        AND platform_id = #{platformId}
        AND handle = #{handle}
        AND first_ac_time &gt;= #{start}
        AND first_ac_time &lt; #{end}
    </select>

</mapper>
